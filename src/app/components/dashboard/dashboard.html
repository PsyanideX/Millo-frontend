<div class="millo-container" cdkDropListGroup>
  <header class="app-header">
    <div class="board-info">
      <button class="icon-btn hamburger" (click)="toggleAppsMenu()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
      <h1>
        {{ currentBoard()?.name || 'Millo Board' }}
        @if (currentBoard() && currentBoard()?.ownerId !== authService.currentUser()?.id) {
        <span class="header-shared-badge">Invitado</span>
        }
      </h1>
      <button class="share-btn" (click)="openShareModal()"
        *ngIf="currentBoard()?.ownerId === authService.currentUser()?.id">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="8.5" cy="7" r="4"></circle>
          <line x1="20" y1="8" x2="20" y2="14"></line>
          <line x1="23" y1="11" x2="17" y2="11"></line>
        </svg>
        Compartir
      </button>

      <!-- Selection Actions -->
      <div class="selection-actions" *ngIf="selectedTaskIds().size > 0">
        <span class="selection-count">{{ selectedTaskIds().size }} seleccionado(s)</span>
        <button class="bulk-move-btn" (click)="openMoveTasksModal()">
          Mover a...
        </button>
        <button class="clear-selection-btn" (click)="clearSelection()">
          Cancelar
        </button>
      </div>
    </div>

    <div class="filters">
      <button (click)="selectCategory(null)" [class.active]="!selectedCategoryId()">Todo</button>
      @for (cat of categories(); track cat.id) {
      <button (click)="selectCategory(cat.id)" [class.active]="selectedCategoryId() === cat.id">
        {{ cat.name }}
      </button>
      }
    </div>
  </header>

  <main class="board-canvas" #boardCanvas>
    <div class="lists-container">
      @for (column of columns(); track column.id) {
      <section class="column">
        <div class="column-header">
          <h2>{{ column.name }} <span>({{ column.tasks?.length || 0 }})</span></h2>
          <button class="menu-btn">¬∑¬∑¬∑</button>
        </div>

        <div [id]="column.id" cdkDropList [cdkDropListData]="column.tasks" [cdkDropListConnectedTo]="columnIds()"
          (cdkDropListDropped)="drop($event, column.id)" class="task-list">

          @for (task of column.tasks; track task.id) {
          @if (!selectedCategoryId() || task.categoryId === selectedCategoryId()) {
          <article class="card" cdkDrag [cdkDragData]="task" (cdkDragStarted)="onDragStarted()"
            (cdkDragEnded)="onDragEnded()"
            (click)="selectedTaskIds().size > 0 ? toggleTaskSelection(task.id, $event) : openEditCardModal(task)"
            [class.selected]="selectedTaskIds().has(task.id)">
            <div class="card-selection-overlay" (click)="toggleTaskSelection(task.id, $event)">
              <div class="selection-checkbox" [class.checked]="selectedTaskIds().has(task.id)"></div>
            </div>
            <div class="card-content">
              <div class="card-tags">
                <div class="category-tag" [style.background-color]="task.category?.color" title="Categor√≠a"></div>
                <span class="priority-tag" [class]="(task.priority || 'Low').toLowerCase()">{{ task.priority || 'Low'
                  }}</span>
                <span *ngIf="isUrgent(task.endDate)" class="urgent-icon" title="Vence pronto">‚è∞</span>
              </div>
              <h3>{{ task.title }}</h3>
              <p *ngIf="task.description" class="description">{{ task.description }}</p>
              <div class="card-footer">
                <span class="effort" *ngIf="task.effortPoints">{{ task.effortPoints }} h</span>
                <span class="cost" *ngIf="getTaskCostTotal(task) > 0">{{ getTaskCostTotal(task).toFixed(2) }}‚Ç¨</span>
              </div>
            </div>
          </article>
          }
          }

          <div class="column-footer" *ngIf="column.tasks && column.tasks.length > 0">
            <span class="total-effort">Total: {{ getColumnEffortTotal(column) }} h</span>
          </div>

          <button class="add-card-btn" (click)="openAddCardModal(column.id)">+ A√±adir una tarjeta</button>
        </div>
      </section>
      }

      <button class="add-list-btn" (click)="openAddColumnModal()">+ A√±adir otra columna</button>
    </div>
  </main>

  <!-- Custom Modal -->
  @if (isModalOpen()) {
  <div class="modal-overlay" (mousedown)="handleOverlayMouseDown($event)" (click)="handleOverlayClick($event)">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ modalTitle() }}</h2>
        <button class="close-btn" (click)="closeModal()">&times;</button>
      </div>

      <div class="modal-body">
        <div class="form-group" *ngIf="modalMode() !== 'SHARE' && modalMode() !== 'MOVE'">
          <label>T√≠tulo</label>
          <input type="text" [value]="formTitle()" (input)="formTitle.set($any($event.target).value)"
            placeholder="Introduce un t√≠tulo..." autofocus>
        </div>

        <div class="form-group" *ngIf="modalMode() === 'SHARE'">
          <label>A√±adir nuevo miembro</label>
          <div class="share-input-group">
            <input type="email" [value]="formEmail()" (input)="formEmail.set($any($event.target).value)"
              placeholder="usuario@ejemplo.com" autofocus (keyup.enter)="shareBoard()">
            <select [value]="formRole()" (change)="formRole.set($any($event.target).value)">
              <option value="viewer">Viewer</option>
              <option value="editor">Editor</option>
              <option value="owner">Owner</option>
            </select>
            <button class="add-member-btn" [disabled]="!formEmail()" (click)="shareBoard()">+</button>
          </div>
        </div>

        <!-- Members List -->
        <div class="members-section" *ngIf="modalMode() === 'SHARE'">
          <label>Miembros del tablero ({{ boardMembers().length }})</label>
          <div class="members-list">
            @for (member of boardMembers(); track member.id) {
            <div class="member-item">
              <div class="member-info">
                <div class="member-avatar">{{ member.user.name.charAt(0).toUpperCase() }}</div>
                <div class="member-details">
                  <span class="member-name">{{ member.user.name }}</span>
                  <span class="member-email">{{ member.user.email }}</span>
                </div>
              </div>
              <div class="member-actions">
                <span class="member-role" [class]="member.role">{{ member.role }}</span>
                @if (member.role !== 'owner' || (boardMembers().length > 1 && member.userId !==
                currentBoard()?.ownerId)) {
                <button class="remove-member-btn" title="Eliminar miembro" (click)="removeMember(member.id)">√ó</button>
                }
              </div>
            </div>
            }
          </div>
        </div>

        <div class="move-selection-section" *ngIf="modalMode() === 'MOVE'">
          <div class="form-group">
            <label>Seleccionar Tablero Destino</label>
            <select [ngModel]="targetBoardId()" (ngModelChange)="onTargetBoardChange($event)">
              <option [ngValue]="null" disabled>Elige un tablero...</option>
              @for (board of boards(); track board.id) {
              @if (board.id !== currentBoard()?.id) {
              <option [value]="board.id">{{ board.name }}</option>
              }
              }
            </select>
          </div>

          @if (targetBoardId()) {
          <div class="form-group">
            <label>Seleccionar Columna</label>
            <select [ngModel]="targetColumnId()" (ngModelChange)="targetColumnId.set($event)">
              <option [ngValue]="null" disabled>Elige una columna...</option>
              @for (col of targetBoardColumns(); track col.id) {
              <option [value]="col.id">{{ col.name }}</option>
              }
            </select>
          </div>
          }
        </div>

        <div class="form-group" *ngIf="modalMode() !== 'LIST' && modalMode() !== 'SHARE' && modalMode() !== 'MOVE'">
          <label>Descripci√≥n</label>
          <textarea [value]="formDescription()" (input)="formDescription.set($any($event.target).value)"
            placeholder="A√±ade una descripci√≥n m√°s detallada..."></textarea>
        </div>

        <div class="modal-row"
          *ngIf="modalMode() !== 'LIST' && modalMode() !== 'BOARD' && modalMode() !== 'SHARE' && modalMode() !== 'MOVE'">
          <div class="form-group flex-1">
            <label>Esfuerzo (horas)</label>
            <input type="number" [value]="formEffortPoints()"
              (input)="formEffortPoints.set($any($event.target).valueAsNumber)" min="0">
          </div>

          <div class="form-group flex-2">
            <label>Categor√≠a</label>
            <div class="select-wrapper">
              <select [ngModel]="formCategoryId()" (ngModelChange)="formCategoryId.set($event)"
                *ngIf="!showNewCategoryForm()">
                <option [ngValue]="null">Sin categor√≠a</option>
                @for (cat of categories(); track cat.id) {
                <option [ngValue]="cat.id">{{ cat.name }}</option>
                }
              </select>
              <button class="small-btn" (click)="toggleCategoryForm()">
                {{ showNewCategoryForm() ? 'Cancelar' : '+ Nueva' }}
              </button>
            </div>
          </div>
        </div>

        <div class="modal-row"
          *ngIf="modalMode() !== 'LIST' && modalMode() !== 'BOARD' && modalMode() !== 'SHARE' && modalMode() !== 'MOVE'">
          <div class="form-group flex-1">
            <label>Prioridad</label>
            <select [value]="formPriority()" (change)="formPriority.set($any($event.target).value)">
              <option value="Low">Baja</option>
              <option value="Medium">Media</option>
              <option value="High">Alta</option>
            </select>
          </div>
          <div class="form-group flex-1">
            <label>Fecha L√≠mite</label>
            <input type="date" [value]="formEndDate()" (change)="formEndDate.set($any($event.target).value)">
          </div>
        </div>

        <!-- Inline Category Creation -->
        <div class="category-creator"
          *ngIf="showNewCategoryForm() && modalMode() !== 'LIST' && modalMode() !== 'BOARD' && modalMode() !== 'SHARE' && modalMode() !== 'MOVE'">
          <div class="form-group">
            <label>Nueva Categor√≠a</label>
            <div class="creator-row">
              <input type="text" [value]="newCategoryName()" (input)="newCategoryName.set($any($event.target).value)"
                placeholder="Nombre...">
              <input type="color" [value]="newCategoryColor()"
                (input)="newCategoryColor.set($any($event.target).value)">
            </div>
          </div>
        </div>

        <!-- Items Section -->
        <div class="items-section"
          *ngIf="modalMode() !== 'LIST' && modalMode() !== 'BOARD' && modalMode() !== 'SHARE' && modalMode() !== 'MOVE'">
          <button class="toggle-items-btn" (click)="toggleItemsForm()">
            {{ showItemsForm() ? '‚ñº' : '‚ñ∂' }} Art√≠culos ({{ formItems().length }})
          </button>

          <div class="items-form" *ngIf="showItemsForm()">
            <!-- New Item Input -->
            <div class="add-item-form">
              <div class="form-group">
                <label>Nombre del art√≠culo</label>
                <input type="text" [value]="newItemName()" (input)="newItemName.set($any($event.target).value)"
                  placeholder="Nombre del art√≠culo..." (keyup.enter)="addItem()">
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label>Cantidad</label>
                  <input type="number" [value]="newItemQuantity()"
                    (input)="newItemQuantity.set($any($event.target).valueAsNumber)" min="1" max="9999">
                </div>

                <div class="form-group">
                  <label>Precio (‚Ç¨)</label>
                  <input type="number" [value]="newItemPrice()"
                    (input)="newItemPrice.set($any($event.target).valueAsNumber)" min="0" step="0.01">
                </div>

                <button class="add-item-btn" (click)="addItem()">A√±adir</button>
              </div>
            </div>

            <!-- Items List -->
            <div class="items-list" *ngIf="formItems().length > 0">
              @for (item of formItems(); track $index) {
              <div class="item-row">
                <div class="item-info">
                  <span class="item-name">{{ item.name }}</span>
                  <span class="item-details">{{ item.quantity }} x {{ item.price.toFixed(2) }}‚Ç¨ = {{ (item.quantity *
                    item.price).toFixed(2) }}‚Ç¨</span>
                </div>
                <button class="remove-item-btn" (click)="removeItem($index)">‚úï</button>
              </div>
              }

              <div class="items-total">
                <span>Total art√≠culos:</span>
                <span class="total-price">{{ itemsTotal().toFixed(2) }}‚Ç¨</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="cancel-btn" (click)="closeModal()">Cancelar</button>
        <button class="submit-btn"
          [disabled]="(modalMode() !== 'SHARE' && modalMode() !== 'MOVE' && !formTitle()) || (modalMode() === 'MOVE' && (!targetBoardId() || !targetColumnId()))"
          (click)="modalMode() === 'SHARE' ? closeModal() : submitModal()">
          @if (modalMode() === 'LIST') {
          A√±adir columna
          } @else if (modalMode() === 'EDIT') {
          Guardar cambios
          } @else if (modalMode() === 'BOARD') {
          Crear tablero
          } @else if (modalMode() === 'SHARE') {
          Listo
          } @else if (modalMode() === 'MOVE') {
          Mover {{ selectedTaskIds().size }} tareas
          } @else {
          A√±adir tarjeta
          }
        </button>
      </div>
    </div>
  </div>
  }

  <!-- Floating Action Button -->
  <div class="fab-container">
    <button class="fab-main" (click)="toggleMenuOptions()" [class.open]="showMenuOptions()">
      ‚öôÔ∏è
    </button>

    @if (showMenuOptions()) {
    <button class="fab-option" (click)="openFinancialSummary()">
      üìä Resumen Financiero
    </button>
    <button class="fab-option" (click)="openGanttConfig()">
      üìÖ Diagrama de Gantt
    </button>
    }
  </div>

  <!-- Financial Summary Modal -->
  @if (isFinancialSummaryOpen()) {
  <div class="modal-overlay" (click)="closeFinancialSummary()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Resumen Financiero</h2>
        <button class="close-btn" (click)="closeFinancialSummary()">&times;</button>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label>Categor√≠a</label>
          <select [value]="summarySelectedCategoryId() || ''"
            (change)="summarySelectedCategoryId.set($any($event.target).value || null)">
            <option [value]="''">Todas las categor√≠as</option>
            @for (cat of categories(); track cat.id) {
            <option [value]="cat.id">{{ cat.name }}</option>
            }
          </select>
        </div>

        <div class="financial-summary">
          @if (getFinancialSummary(summarySelectedCategoryId()).items.length > 0) {
          <table class="summary-table">
            <thead>
              <tr>
                <th>Art√≠culo</th>
                <th>Cantidad</th>
                <th>Precio Unit.</th>
                <th>Subtotal</th>
              </tr>
            </thead>
            <tbody>
              @for (item of getFinancialSummary(summarySelectedCategoryId()).items; track item.name) {
              <tr>
                <td class="item-name">{{ item.name }}</td>
                <td class="quantity">{{ item.quantity }}</td>
                <td class="price">{{ item.price.toFixed(2) }}‚Ç¨</td>
                <td class="subtotal">{{ item.subtotal.toFixed(2) }}‚Ç¨</td>
              </tr>
              }
            </tbody>
          </table>

          <div class="summary-total">
            <span>Total:</span>
            <span class="total-amount">{{ getFinancialSummary(summarySelectedCategoryId()).total.toFixed(2) }}‚Ç¨</span>
          </div>
          } @else {
          <p class="no-items">No hay art√≠culos para esta categor√≠a</p>
          }
        </div>
      </div>

      <div class="modal-footer">
        <button class="cancel-btn" (click)="closeFinancialSummary()">Cerrar</button>
      </div>
    </div>
  </div>
  }

  <!-- Apps Menu Sidebar -->
  @if (isAppsMenuOpen()) {
  <div class="apps-menu-overlay" (click)="toggleAppsMenu()">
    <aside class="apps-sidebar" (click)="$event.stopPropagation()">
      <header>
        <div class="sidebar-header-content">
          <div class="logo-circle">M</div>
          <h2>Mis Tableros</h2>
        </div>
        <button class="close-sidebar-btn" (click)="toggleAppsMenu()">&times;</button>
      </header>

      <div class="sidebar-content">
        <!-- Tablero Principal -->
        @if (primaryBoardSignal()) {
        <div class="sidebar-section">
          <h3>Tablero Principal</h3>
          <ul class="board-list">
            @let pBoard = primaryBoardSignal()!;
            <li [class.active]="currentBoard()?.id === pBoard.id" (click)="switchBoard(pBoard.id)">
              <div class="board-item-content">
                <span class="board-color-dot" [class.owning]="pBoard.ownerId === authService.currentUser()?.id"
                  [class.shared]="pBoard.ownerId !== authService.currentUser()?.id"
                  [style.background-color]="pBoard.ownerId === authService.currentUser()?.id ? '#e3a008' : '#4a90e2'"></span>
                <span class="board-name">{{ pBoard.name }}</span>
              </div>
              <div class="board-item-actions">
                @if (pBoard.ownerId !== authService.currentUser()?.id) { <span class="shared-badge">Invitado</span> }
                <span class="primary-badge">Principal</span>
                @if (pBoard.ownerId === authService.currentUser()?.id && boards().length > 1) {
                <button class="delete-board-btn" (click)="deleteBoard($event, pBoard.id)" title="Eliminar tablero">
                  üóëÔ∏è
                </button>
                }
              </div>
            </li>
          </ul>
        </div>
        }

        <!-- Tableros Secundarios -->
        @if (secondaryBoards().length > 0 || sharedBoards().length > 0) {
        <div class="sidebar-section">
          <h3>Tableros Secundarios</h3>
          <ul class="board-list">
            <!-- Owned Secondary Boards -->
            @for (board of secondaryBoards(); track board.id) {
            <li [class.active]="currentBoard()?.id === board.id" (click)="switchBoard(board.id)">
              <div class="board-item-content">
                <span class="board-color-dot owning" [style.background-color]="'#e3a008'"></span>
                <span class="board-name">{{ board.name }}</span>
              </div>
              <div class="board-item-actions">
                <button class="set-primary-btn" (click)="setPrimaryBoard($event, board.id)"
                  title="Marcar como principal">
                  ‚≠ê
                </button>
                @if (board.ownerId === authService.currentUser()?.id) {
                <button class="delete-board-btn" (click)="deleteBoard($event, board.id)" title="Eliminar tablero">
                  üóëÔ∏è
                </button>
                }
              </div>
            </li>
            }

            <!-- Shared Boards -->
            @for (board of sharedBoards(); track board.id) {
            <li [class.active]="currentBoard()?.id === board.id" (click)="switchBoard(board.id)">
              <div class="board-item-content">
                <span class="board-color-dot shared" [style.background-color]="'#4a90e2'"></span>
                <span class="board-name">{{ board.name }}</span>
              </div>
              <div class="board-item-actions">
                <button class="set-primary-btn" (click)="setPrimaryBoard($event, board.id)"
                  title="Marcar como principal">
                  ‚≠ê
                </button>
                <span class="shared-badge">Invitado</span>
              </div>
            </li>
            }
          </ul>
        </div>
        }

        <div class="sidebar-section">
          <button class="create-board-btn" (click)="openAddBoardModal()">
            <span>+</span> Crear nuevo tablero
          </button>
        </div>
      </div>

      <div class="sidebar-footer">
        <div class="user-profile">
          <div class="avatar">{{ authService.currentUser()?.name?.charAt(0)?.toUpperCase() || 'U' }}</div>
          <div class="user-info">
            <span class="username">{{ authService.currentUser()?.name || 'Usuario' }}</span>
            <span class="workspace">{{ currentBoard()?.name || 'Tablero Principal' }}</span>
          </div>
        </div>
      </div>
    </aside>
  </div>
  }

  <!-- Gantt Configuration Modal -->
  @if (isGanttConfigOpen()) {
  <div class="modal-overlay" (click)="closeGanttConfig()">
    <div class="modal-content gantt-config-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Configurar Diagrama de Gantt</h2>
        <button class="close-btn" (click)="closeGanttConfig()">&times;</button>
      </div>

      <div class="modal-body">
        <p class="config-description">Configura las horas de trabajo para cada d√≠a de la semana. Esta configuraci√≥n se
          aplicar√° a todas las semanas del diagrama.</p>

        <div class="gantt-config-grid">
          @for (day of weekDays; track day.key) {
          <div class="day-config">
            <label>{{ day.label }}</label>
            <input type="number" [value]="ganttWorkHours()[day.key]"
              (input)="updateWorkHours(day.key, $any($event.target).valueAsNumber)" min="0" max="24" step="0.5">
            <span class="hours-label">horas</span>
          </div>
          }
        </div>

        <div class="total-hours-week">
          <strong>Total horas semanales:</strong> {{ getTotalWeeklyHours() }} horas
        </div>
      </div>

      <div class="modal-footer">
        <button class="cancel-btn" (click)="closeGanttConfig()">Cancelar</button>
        <button class="submit-btn" (click)="generateGanttChart()">Generar Diagrama</button>
      </div>
    </div>
  </div>
  }

  <!-- Gantt Chart Visualization Modal -->
  @if (isGanttChartOpen()) {
  <div class="modal-overlay gantt-chart-overlay" (click)="closeGanttChart()">
    <div class="modal-content gantt-chart-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Diagrama de Gantt - {{ currentBoard()?.name }}</h2>
        <button class="close-btn" (click)="closeGanttChart()">&times;</button>
      </div>

      <div class="modal-body gantt-body">
        @if (ganttTasks().length > 0) {
        <div class="gantt-container" [style.--timeline-width.px]="ganttWeeks().length * 350">
          <!-- Timeline Header -->
          <div class="gantt-header">
            <div class="gantt-task-column">
              <div class="task-header-cell">Tarea</div>
            </div>
            <div class="gantt-timeline-column">
              <div class="timeline-header">
                @for (week of ganttWeeks(); track $index) {
                <div class="week-header">
                  <span>Semana {{ $index + 1 }}</span>
                  <div class="days-header">
                    @for (day of weekDays; track day.key) {
                    <div class="day-header" [title]="day.label">
                      {{ day.short }}
                    </div>
                    }
                  </div>
                </div>
                }
              </div>
            </div>
          </div>

          <!-- Gantt Rows -->
          <div class="gantt-rows">
            @for (ganttTask of ganttTasks(); track ganttTask.task.id) {
            <div class="gantt-row">
              <div class="gantt-task-info">
                <div class="task-title">{{ ganttTask.task.title }}</div>
                <div class="task-meta">
                  <span class="priority-badge" [class]="(ganttTask.task.priority || 'Low').toLowerCase()">
                    {{ ganttTask.task.priority || 'Low' }}
                  </span>
                  <span class="effort-badge">{{ ganttTask.task.effortPoints || 0 }} h</span>
                  @if (ganttTask.task.category) {
                  <span class="category-badge" [style.background-color]="ganttTask.task.category.color">
                    {{ ganttTask.task.category.name }}
                  </span>
                  }
                </div>
              </div>
              <div class="gantt-timeline">
                <div class="gantt-bar-container">
                  <div class="gantt-bar" [style.left.%]="ganttTask.startPercent"
                    [style.width.%]="ganttTask.widthPercent"
                    [class]="'priority-' + (ganttTask.task.priority || 'Low').toLowerCase()"
                    [title]="'Inicio: D√≠a ' + ganttTask.startDay + ' | Duraci√≥n: ' + ganttTask.duration + ' d√≠as'">
                    <span class="bar-label">{{ ganttTask.duration.toFixed(1) }} d√≠as</span>
                  </div>
                </div>
              </div>
            </div>
            }
          </div>

          <!-- Summary -->
          <div class="gantt-summary">
            <div class="summary-item">
              <strong>Total de tareas:</strong> {{ ganttTasks().length }}
            </div>
            <div class="summary-item">
              <strong>Esfuerzo total:</strong> {{ getTotalEffort() }} horas
            </div>
            <div class="summary-item">
              <strong>Duraci√≥n estimada:</strong> {{ ganttWeeks().length }} semana(s)
            </div>
          </div>
        </div>
        } @else {
        <div class="no-tasks-message">
          <p>No hay tareas en este tablero para generar un diagrama de Gantt.</p>
        </div>
        }
      </div>

      <div class="modal-footer">
        <button class="cancel-btn" (click)="closeGanttChart()">Cerrar</button>
      </div>
    </div>
  </div>
  }
</div>